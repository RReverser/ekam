#! /bin/sh

set -eu

if test $# = 0; then
  # Ekam is querying the script.  Tell it that we care about headers.
  echo trigger filetype:.h
  exit 0
fi

echo findInput $1
read INPUT

TAG=$(echo "$INPUT" | sed -e 's,^.*/src/,c++header:,g')
if test "$INPUT" != "$TAG"; then
  echo provide "$INPUT" "$TAG"
fi

TAG=$(echo "$INPUT" | sed -e 's,^.*/include/,c++header:,g')
if test "$INPUT" != "$TAG"; then
  echo provide "$INPUT" "$TAG"
fi
